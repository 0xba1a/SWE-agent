#!/usr/bin/env python

import json
import os
import sys

SWE_AGENT_ENV_FILE = os.environ.get("SWE_AGENT_ENV_FILE", "/root/.swe-agent-env")

def write_env(var_name, var_value):
    if not os.path.exists(SWE_AGENT_ENV_FILE):
        with open(SWE_AGENT_ENV_FILE, "w") as f:
            json.dump({}, f)
    with open(SWE_AGENT_ENV_FILE, "r") as f:
        env = json.load(f)
    env[var_name] = var_value
    with open(SWE_AGENT_ENV_FILE, "w") as f:
        json.dump(env, f)

if __name__ == "__main__":
    var_name = sys.argv[1]
    var_value = sys.argv[2] if len(sys.argv) > 2 else ""
    write_env(var_name, var_value)
